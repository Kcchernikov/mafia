# Mafia

## Инструкция к запуску

### Запуск сервера

Для запуска сервера следует выполнить команду `docker-compose build && docker-compose up -d`

Для запуска может потребоваться время, так как сервер ждет, пока поднимется RabbitMQ (сам запуск занимает обычно 30 секунд - минуту)

### Запуск клиента

Если вы используете macos, то tkinter может плохо работать с версией питона до 3.11, поэтому в этом случае надо убедиться, что питон имеет достаточную версию. 

Для установки tkinter можно воспользоваться командой `brew install python-tk`

Перед запуском надо сделать `pip3.11 install --upgrade pip3 -r requirements.txt`

Это установит необходимые для клиента библиотеки. 

Для запуска клиента следует запустить `python3.11 client.py` и далее следовать инструкциям, которые будут в открывшемся графическом окне.

## Взаимодействие с клиентом

Можно ввести адресс для подключения к серверу или нажать Enter (в этом случае будет установлен дефолтный адресс для подключения). Сервер слушает на порту 9000. 

При успешном подключении надо будет выбрать один из 3х вариантов

* 'Создать комнату'. Если выбран данный вариант, то сервер создаст для вас новую игровую комнату и пришлет ее номер, который вы впоследствии можете
сообщить своим друзьям, чтобы они к вам подключились
* 'Подключиться к любой существующей комнате'. В случае выбора данного варианта, вас присоединит к любой свободной комнате или создаст новую комнату, если таких нет
* 'Подключится к комнате по номеру'. Вы можете подключится к своим друзьям по номеру комнаты.

Далее вам надо ввести имя, которое будут видеть другие игроки. Имена в комнате должны быть различными, чтобы не создавалась путаница. Если вы введете уже занятое имя, вас попросят поменять его.

Далее вам предложат сыграть за вас, в случае выбора этого варианта все решения за вас будет принимать клиент.

Пройдя предыдущие шаги вы попадаете в комнату ожидания игроков, вы можете наблюдать имена игроков в вашей комнате, а также число уже подключившихся к вам игроков, но еще не выбравших имя.

Когда в комнате наберется 4 человека, им автоматически выдадуться роли. В комнате будет 1 комиссар, 1 мафия и 2 мирных жителя. 

После этого у вас появится возможность писать в чат (В режиме бота чат отключен, потому что боты не умеют общаться). Сервер и клиент следят, чтобы
мертвые игроки не писали в чат. Ночью чат также отключен в соответствии с заданием и, потому что ночью надо спать.

Дальнейшая игра происходит по классическим правилам мафии, сервер и клиент следят за тем, чтобы вы не жульничали, не пытались убить себя, не проверяли уже мертвых игроков, не голосовали против себя. Вы становитесь духом, если вас убила мафия или вы были выбраны на голосовании. Вы наблюдаете за игрой, видете голоса других игроков, находки комиссара и имена тех, кто не пережил ночь.

Если вы хакер и написали свой клиент, то это не даст вам преимущества. Сервер все равно следит за тем, чтобы вы не делали вредных действий, не писали в чат, когда нельзя и не подменяли свое имя в чате. Вы также не получите от него информацию о ролях людей

Приятной игры!
